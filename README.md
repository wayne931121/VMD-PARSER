# VMD-PARSER
python read and write vmd

```py
from vmd import *
import copy

vmd = vmdread("b.vmd")
motion = motionreader(vmd)
ik = ikreader(vmd["ik"])

WriteVMD("example.vmd", motion)



vmdc = copy.deepcopy(vmd)
vmdc["motion"] = vmdc["motion"][:32]
vmdc["morph"] = vmdc["morph"][:32]

print("vmd")
print(vmdc)
print()

print("motion")
print(motion[:6])
print()

print(ik)
print(ik)
```

output:

```
vmd
{'headers': b'Vocaloid Motion Data 0002\x00\x00\x00\x00\x00', 'name': 'fbxToVMD\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00', 'motioncount': 14800, 'motion': b'\x91S\x82\xc4\x82\xcc\x90e\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xbdYHA\x13v`=\xd3T\n<\x00', 'morphcount': 26, 'morph': b'\x93{\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x8ay\x00\x00\x00\x00\x00\x00\x00', 'cameracount': 0, 'camera': b'', 'lightcount': 0, 'light': b'', 'shadowcount': 0, 'shadow': b'', 'iktotalcount': 1, 'ik': [{'ikcount': 0, 'ikshow': 1, 'iknumber': 4, 'ik': b'\x8d\xb6\x91\xab\x82h\x82j\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x8d\xb6\x82\xc2\x82\xdc\x90\xe6\x82h\x82j\x00\x00\x00\x00\x00\x00\x00\x00\x00\x89E\x91\xab\x82h\x82j\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x89E\x82\xc2\x82\xdc\x90\xe6\x82h\x82j\x00\x00\x00\x00\x00\x00\x00\x00\x00'}], 'end': b''}

motion
[{'name': '全ての親\x00\x00\x00\x00\x00\x00\x00', 'frame': 0, 'position': [12.5219087600708, 0.05480010434985161, 0.008443075232207775], 'quaternion': [0.0, -0.0017247237265110016, 0.0, 0.9999985694885254], 'bezier': b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'}, {'name': 'センター\x00\x00\x00\x00\x00\x00\x00', 'frame': 0, 'position': [-0.051242101937532425, 0.00524371862411499, 0.07137645781040192], 'quaternion': [0.002031812909990549, -0.05636328458786011, -0.11431585252285004, 0.9918422698974609], 'bezier': b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'}, {'name': '左足ＩＫ\x00\x00\x00\x00\x00\x00\x00', 'frame': 0, 'position': [0.2903091609477997, 0.5455672740936279, -0.17157422006130219], 'quaternion': [0.0, 0.0, 0.0, 1.0], 'bezier': b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'}, {'name': '右足ＩＫ\x00\x00\x00\x00\x00\x00\x00', 'frame': 0, 'position': [0.3086232841014862, 0.3503821790218353, 0.12348335981369019], 'quaternion': [0.0, 0.0, 0.0, 1.0], 'bezier': b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'}, {'name': '上半身\x00\x00\x00\x00\x00\x00\x00\x00\x00', 'frame': 0, 'position': [-0.0, 0.0, -0.0], 'quaternion': [0.001154646510258317, 0.017372675240039825, 0.05958166718482971, 0.9980716109275818], 'bezier': b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'}, {'name': '上半身2\x00\x00\x00\x00\x00\x00\x00\x00', 'frame': 0, 'position': [-6.28642737865448e-07, 3.725290298461914e-07, 9.313225746154785e-08], 'quaternion': [0.0, -0.0, 5.109539902292681e-09, 1.0], 'bezier': b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'}]

[{'ikcount': 0, 'ikshow': 1, 'iknumber': 4, 'ik': [{'name': '左足ＩＫ\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00', 'enable': 0}, {'name': '左つま先ＩＫ\x00\x00\x00\x00\x00\x00\x00\x00', 'enable': 0}, {'name': '右足ＩＫ\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00', 'enable': 0}, {'name': '右つま先ＩＫ\x00\x00\x00\x00\x00\x00\x00\x00', 'enable': 0}]}]
[{'ikcount': 0, 'ikshow': 1, 'iknumber': 4, 'ik': [{'name': '左足ＩＫ\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00', 'enable': 0}, {'name': '左つま先ＩＫ\x00\x00\x00\x00\x00\x00\x00\x00', 'enable': 0}, {'name': '右足ＩＫ\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00', 'enable': 0}, {'name': '右つま先ＩＫ\x00\x00\x00\x00\x00\x00\x00\x00', 'enable': 0}]}]
PS C:\Users\原神\Desktop>
```

reference

https://github.com/syoyo/MMDLoader/blob/master/vmd_reader.cc

https://github.com/59naga/vpvp-vmd/blob/master/src/reader.coffee

https://github.com/errno-mmd/VMD-Lifting/blob/master/applications/VmdWriter.py

tool

https://github.com/wayne931121/EncodingExplosion
